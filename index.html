<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MacVG ‚Äì Free Unblocked Games (USA)</title>
  <meta name="description" content="Play the best free unblocked games online in the USA. Action, puzzle, racing, and .io games for school or work."/>
  <meta name="keywords" content="unblocked games, free games, play online, io games, school games, USA unblocked, browser games"/>
  <meta name="author" content="MacVG"/>
  <meta property="og:title" content="MacVG ‚Äì Free Unblocked Games (USA)"/>
  <meta property="og:description" content="Play the best free unblocked games online in the USA. Action, puzzle, racing, and .io games for school or work."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://lesson-30.pro/"/>
  <meta property="og:image" content="https://lesson-30.pro/assets/cover.png"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="MacVG ‚Äì Free Unblocked Games (USA)"/>
  <meta name="twitter:description" content="Play the best free unblocked games online in the USA. Action, puzzle, racing, and .io games for school or work."/>
  <link id="site-favicon" rel="icon" href="assets/favicon.png"/>
  <link rel="stylesheet" href="styles.css?vs1d"/>
  <link rel="stylesheet" href="assets/css/app-games.css">
</head>
<body>
<script>
	window.aiptag = window.aiptag || {cmd: []};
	aiptag.cmd.display = aiptag.cmd.display || [];
	aiptag.cmd.player = aiptag.cmd.player || [];

	//CMP tool settings
	aiptag.cmp = {
		show: true,
		position: "centered",  //centered, bottom
		button: true,
		buttonText: "Privacy settings",
		buttonPosition: "bottom-left" //bottom-left, bottom-right, bottom-center, top-left, top-right
	}
	aiptag.cmd.player.push(function() {
		aiptag.adplayer = new aipPlayer({
			AD_WIDTH: 960,
			AD_HEIGHT: 540,
			AD_DISPLAY: 'center', //default, fullscreen, fill, center, modal-center
			LOADING_TEXT: 'loading advertisement',
			PREROLL_ELEM: function(){return document.getElementById('videoad')},
			AIP_COMPLETE: function (state)  {
				 lesson_detail();
			}
		});

			});

		function show_videoad() {
		//check if the adslib is loaded correctly or blocked by adblockers etc.
		if (typeof aiptag.adplayer !== 'undefined') {
			aiptag.cmd.player.push(function() { aiptag.adplayer.startVideoAd(); });
		} else {
 			 
 		}
	}
		</script>
	<script async src="//api.adinplay.com/libs/aiptag/pub/MNS/agario.cafe/tag.min.js"></script>
     <div id="videoad"></div>
  <header>
  <div class="container">
    <div class="row">
      <a class="brand" href="index.html">MacVG</a>
      <nav class="navlinks">
        <a class="btn navbtn" href="index.html">Home</a>
        <a class="btn navbtn" href="about.html">About</a>
        <a class="btn navbtn" href="contact.html">Contact</a>
        <a class="btn navbtn" href="privacy.html">Privacy Policy</a>
        <a class="btn navbtn" href="dmca.html">DMCA</a>
      
        <a class="btn navbtn" id="settingsBtn" href="javascript:void(0)">‚öôÔ∏è Settings</a>
      </nav>
      <div class="spacer"></div>
</div>
  </div>
</header>
  <div class="container">
  <center>
	<div id='agario-cafe_970x250'>
		<script type='text/javascript'>
			aiptag.cmd.display.push(function() { aipDisplayTag.display('agario-cafe_970x250'); });
		</script>
	</div></center>
    <div class="searchbar"><span>üîé</span><input id="q" type="search" placeholder="Search games..." autocomplete="off"/></div>
    <div id="cats" class="toolbar"></div>
  </div>

  <main class="container mainwrap">
    <div id="grid" class="grid" aria-live="polite"></div>
    <div id="empty" class="empty">Place <strong>games.json</strong> next to this file.</div>
  </main>

  <footer>
  <div class="container fwrap">
    <div>¬© <span id="y"></span> MacVG ‚Ä¢ Free Unblocked Games</div>
    <div class="fnav">
      <a class="btn navbtn" href="about.html">About</a>
      <a class="btn navbtn" href="contact.html">Contact</a>
      <a class="btn navbtn" href="privacy.html">Privacy Policy</a>
      <a class="btn navbtn" href="dmca.html">DMCA</a>
    </div>
  </div>
</footer>

  <div id="modal" class="modal" aria-hidden="true">
    <div class="wrap">
      <div class="topbar">
        <button id="close" class="btn">‚Üê Back</button>
        <button id="reload" class="btn">Reload</button>
        <div style="margin-left:auto"></div>
        <button id="full" class="btn">Fullscreen</button>
      </div>
      <iframe id="frame" title="Game"></iframe>
    </div>
  </div>

  <aside id="settings" class="settings" aria-hidden="true">
    <header class="topbar">
      <div style="font-weight:600">Settings</div>
      <div style="margin-left:auto"></div>
      <button id="settingsClose" class="btn" type="button" onclick="document.querySelector('.settings').classList.remove('open')">Close</button>
    </header>
    <div class="panel">
      <div class="field">
        <label><input type="checkbox" id="cloakEnabled"/> Enable Tab Cloak</label>
        <div class="help">Replaces the tab title and favicon.</div>
      </div>
      <div class="row2">
        <div class="field">
          <label>Title</label>
          <input id="cloakTitle" placeholder="e.g., Google Classroom"/>
        </div>
        <div class="field">
          <label>Favicon URL</label>
          <input id="cloakIcon" placeholder="https://google.com/favicon.ico"/>
        </div>
      </div>
      <div class="field">
        <button id="cloakPresetClassroom" class="btn" type="button">Quick: Classroom</button>
        <button id="cloakPresetDocs" class="btn" type="button">Quick: Docs</button>
      </div>
      <div class="hr"></div>
      <div class="field">
        <label><input type="checkbox" id="aboutBlankDefault"/> Open games in about:blank</label>
        <div class="help">If enabled, clicking the image opens a new about:blank tab.</div>
      </div>
      <div class="hr"></div>
      <div class="field">
        <label>Panic Redirect (optional)</label>
        <input id="panicUrl" placeholder="https://www.google.com"/>
        <div class="help">Press <b>Escape</b> to redirect here when set.</div>
      </div>
    </div>
  </aside>

  <script src="app.js"></script>

<script>
// === geography-20 style preroll: AdInPlay + same-origin game link guard ===
(function(){
  function once(fn){ var called=false; return function(){ if(!called){ called=true; try{ fn&&fn(); }catch(e){} } }; }
  function waitFor(cond, timeoutMs, ok, ko){
    var t0=Date.now();
    (function tick(){
      try{ if(cond()) return ok(); }catch(e){}
      if (Date.now()-t0>=timeoutMs) return (ko&&ko());
      setTimeout(tick,50);
    })();
  }

  // AdInPlay-friendly show_videoad(cb)
  if (typeof window.show_videoad !== 'function'){
    window.show_videoad = function(cb){
      var done = once(cb||function(){});
      waitFor(function(){ return (window.aiptag || window.aipPlayer || window.adplayer || window.aipDisplayTag); }, 3000, function(){
        try{
          var p = window.adplayer || (window.aiptag && (window.aiptag.adplayer || window.aiptag.player));
          if (p && typeof p.playAd === 'function'){
            try{ if(typeof p.on==='function'){ p.on('AdEnded', done); p.on('AdError', done); } }catch(e){}
            try{ p.onAdEnded = done; p.onAdError = done; }catch(e){}
            try{ p.playAd({ onAdEnded: done, onAdError: done }); return; }catch(e){}
          }
          if (typeof window.aipPlayer === 'function' && window.aiptag && window.aiptag.cmd && window.aiptag.cmd.player){
            window.aiptag.cmd.player.push(function(){
              try{
                var holder = document.getElementById('aip-preroll') || (function(){
                  var d=document.createElement('div'); d.id='aip-preroll';
                  d.style.position='fixed'; d.style.inset='0'; d.style.zIndex='2147483647'; d.style.background='rgba(0,0,0,.75)';
                  document.body.appendChild(d); return d;
                })();
                var temp = new window.aipPlayer({
                  AD_WIDTH: Math.min(960, Math.floor(window.innerWidth*0.9)),
                  AD_HEIGHT: Math.min(540, Math.floor(window.innerHeight*0.9)),
                  AD_FULLSCREEN: true,
                  AD_VOLUME: 0.5,
                  AD_CONTAINER: holder,
                  SHOW: { CLOSE:false },
                  onAdEnded: function(){ try{ holder.remove(); }catch(e){} done(); },
                  onAdError: function(){ try{ holder.remove(); }catch(e){} done(); }
                });
                try{ temp.playAd(); }catch(e){ done(); }
              }catch(e){ done(); }
            });
            return;
          }
          // banner-only -> don't block
          if (window.aipDisplayTag && typeof window.aipDisplayTag.display==='function'){
            try{ window.aipDisplayTag.display('aip-fallback'); }catch(e){}
          }
          done();
        }catch(e){ done(); }
      }, function(){ done(); });
    };
  }

  // geography-20 style link targeting:
  // - Scope to <main>, #games, .games, .cards, .grid if present to avoid header/footer links
  var SCOPES = ['main','#games','.games','.cards','.grid','.games-grid','.game-grid','.game-list'];
  function pickScope(){
    for (var i=0;i<SCOPES.length;i++){
      var n = document.querySelector(SCOPES[i]);
      if (n) return n;
    }
    return document; // fallback
  }
  function isSameOrigin(href){
    try{ var u = new URL(href, location.href); return u.origin === location.origin; }catch(e){ return true; }
  }
  function isGameHref(href){
    href = (href||'').toLowerCase();
    if (!href) return false;
    if (href.startsWith('#') || href.startsWith('javascript:')) return false;
    // common patterns on game hubs (geography-20-like)
    return /(play|game|games\.html|\/game\/|\/play\/|id=)/.test(href);
  }
  function closestLink(el){
    while (el && el!==document){
      if (el.matches && el.matches('a[href]')) return el;
      el = el.parentNode;
    }
    return null;
  }
  function onClick(e){
    var isPrimary = (e.button===0);
    var modified = e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || !isPrimary;
    if (!isPrimary) return;
    var scope = pickScope();
    if (!scope.contains(e.target)) return; // ignore clicks outside main grid
    var a = closestLink(e.target);
    if (!a) return;
    var href = a.getAttribute('href');
    if (!href) return;
    if (!isSameOrigin(href)) return; // don't intercept external links
    if (!isGameHref(href)) return;   // intercept only game links
    var target = a.getAttribute('target') || (modified ? '_blank' : null);
    e.preventDefault();
    e.stopPropagation();
    try{
      window.show_videoad(function(){
        if (target === '_blank' || modified) window.open(href, '_blank');
        else window.location.href = href;
      });
    }catch(err){
      if (target === '_blank' || modified) window.open(href, '_blank');
      else window.location.href = href;
    }
  }
  if (!window.__GEO20_PREROLL_BOUND__){
    window.__GEO20_PREROLL_BOUND__ = true;
    document.addEventListener('click', onClick, {capture:true, passive:false});
  }
})();
// === /geography-20 preroll ===
</script>

</body>
</html>
